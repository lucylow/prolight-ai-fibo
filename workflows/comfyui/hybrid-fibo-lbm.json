{
  "workflow_name": "Hybrid FIBO + LBM Workflow",
  "description": "Combines LBM relighting for environment-aware lighting transfer with FIBO's structured JSON for precise fine-tuning. Best of both worlds for professional results.",
  "version": "1.0.0",
  "author": "ProLight AI",
  "nodes": {
    "1": {
      "class_type": "LoadImage",
      "inputs": {
        "image": "{{background_image}}"
      },
      "title": "Load Background"
    },
    "2": {
      "class_type": "LoadImage",
      "inputs": {
        "image": "{{foreground_subject}}"
      },
      "title": "Load Subject"
    },
    "3": {
      "class_type": "LoadLBMModel",
      "inputs": {
        "model_name": "lbm_relighting_v2.safetensors"
      },
      "title": "Load LBM Model"
    },
    "4": {
      "class_type": "LBM_Extract_Lighting",
      "inputs": {
        "background_image": ["1", 0],
        "extract_ambient": true,
        "extract_directional": true,
        "extract_color": true
      },
      "title": "Extract Background Lighting"
    },
    "5": {
      "class_type": "LBM_Apply_Relighting",
      "inputs": {
        "foreground_image": ["2", 0],
        "lighting_data": ["4", 0],
        "lbm_model": ["3", 0],
        "intensity": 0.8,
        "preserve_shadows": true,
        "blend_mode": "natural"
      },
      "title": "Apply LBM Relighting",
      "description": "First pass: Apply environment lighting from background"
    },
    "6": {
      "class_type": "FIBO_JSON_Loader",
      "inputs": {
        "fibo_json": "{{fibo_lighting_json}}",
        "mode": "refine"
      },
      "title": "Load FIBO Lighting",
      "description": "Load precise FIBO lighting controls for fine-tuning"
    },
    "7": {
      "class_type": "FIBO_Lighting_Override",
      "inputs": {
        "image": ["5", 0],
        "lighting_json": ["6", 0],
        "override_strength": 0.5,
        "preserve_environment": true
      },
      "title": "FIBO Fine-Tune",
      "description": "Second pass: Fine-tune with FIBO's precise controls"
    },
    "8": {
      "class_type": "MaskFromSubject",
      "inputs": {
        "foreground_image": ["2", 0],
        "method": "automatic"
      },
      "title": "Generate Mask"
    },
    "9": {
      "class_type": "ImageComposite",
      "inputs": {
        "image1": ["7", 0],
        "image2": ["1", 0],
        "mask": ["8", 0],
        "method": "normal"
      },
      "title": "Composite Scene"
    },
    "10": {
      "class_type": "ColorMatch",
      "inputs": {
        "image": ["9", 0],
        "reference": ["1", 0],
        "strength": 0.3
      },
      "title": "Color Match"
    },
    "11": {
      "class_type": "ProfessionalEnhance",
      "inputs": {
        "image": ["10", 0],
        "hdr": true,
        "color_fidelity": true,
        "detail_enhancement": true
      },
      "title": "Professional Enhance",
      "description": "Final professional enhancements"
    },
    "12": {
      "class_type": "SaveImage",
      "inputs": {
        "filename_prefix": "hybrid_fibo_lbm",
        "images": ["11", 0]
      },
      "title": "Save Final Result"
    }
  },
  "links": [
    [1, 0, 4, 0],
    [1, 0, 9, 1],
    [1, 0, 10, 1],
    [2, 0, 5, 0],
    [2, 0, 8, 0],
    [3, 0, 5, 2],
    [4, 0, 5, 1],
    [5, 0, 7, 0],
    [6, 0, 7, 1],
    [7, 0, 9, 0],
    [8, 0, 9, 2],
    [9, 0, 10, 0],
    [10, 0, 11, 0],
    [11, 0, 12, 0]
  ],
  "extra": {
    "ds": {
      "scale": 0.9,
      "offset": [0, 0]
    }
  },
  "metadata": {
    "workflow_type": "hybrid",
    "combines": ["lbm_relighting", "fibo_structured"],
    "best_for": [
      "environment-aware lighting",
      "precise fine-tuning",
      "professional product photography",
      "before/after comparisons"
    ],
    "recommended_for_prolight": true
  }
}
